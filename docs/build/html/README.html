
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>QRPCA &#8212; qrpca 1.4.4 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="QRPCA" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="qrpca">
<h1>QRPCA<a class="headerlink" href="#qrpca" title="Permalink to this headline">¶</a></h1>
<p><em>A Python package for QR based PCA decomposition with CUDA acceleration via torch.</em></p>
<p><code class="docutils literal notranslate"><span class="pre">qrpca</span></code> is a package that uses singular value decomposition and QR decomposition to perform PCA dimensionality reduction. It takes the two-dimensional matrix data matrix as the input, trains the PCA dimensionality reduction matrix, and reduces the dimension of the test data according to the training data. This method can accelerate the operation with GPU in torch environment. Consequently, this package can be used as a simple toolbox to perform astronomical data cleaning.</p>
</section>
<section id="how-to-install-qrpca">
<h1>How to install <code class="docutils literal notranslate"><span class="pre">qrpca</span></code><a class="headerlink" href="#how-to-install-qrpca" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">qrpca</span></code> can be installed by the PyPI and pip:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">qrpca</span>
</pre></div>
</div>
<p>If you download the repository, you can also install it in the <code class="docutils literal notranslate"><span class="pre">QRPCA</span></code> directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">xuquanfeng</span><span class="o">/</span><span class="n">qrpca</span>
<span class="n">cd</span> <span class="n">qrpca</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>You can access it by clicking on <a class="reference external" href="https://github.com/xuquanfeng/qrpca">Github-QRPCA</a></p>
</section>
<section id="how-to-use-qrpca">
<h1>How to use <code class="docutils literal notranslate"><span class="pre">qrpca</span></code><a class="headerlink" href="#how-to-use-qrpca" title="Permalink to this headline">¶</a></h1>
<p>Here is a demo for the use of <cite>qrpca</cite>.</p>
<p>The following are the results of retaining principal components containing 95% of the information content by principal component analysis.
Setting the parameter n_components to a decimal number less than 1 contains the results of the principal components that account for the amount of information in the total data n_components.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">qrpca.decomposition</span> <span class="kn">import</span> <span class="n">QRPCA</span>
<span class="kn">from</span> <span class="nn">qrpca.decomposition</span> <span class="kn">import</span> <span class="n">SVDPCA</span>
<span class="kn">import</span> <span class="nn">torch</span>
<span class="n">np</span><span class="o">.</span><span class="n">set_printoptions</span><span class="p">(</span><span class="n">suppress</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">X_train</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">60000</span><span class="p">,</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">X_test</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="mi">10000</span><span class="p">,</span><span class="mi">2000</span><span class="p">)</span>
<span class="n">n_com</span> <span class="o">=</span> <span class="mf">0.95</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cuda:0&quot;</span> <span class="k">if</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">is_available</span><span class="p">()</span> <span class="k">else</span> <span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">pca</span> <span class="o">=</span> <span class="n">QRPCA</span><span class="p">(</span><span class="n">n_component_ratio</span><span class="o">=</span><span class="n">n_com</span><span class="p">,</span><span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>  <span class="c1">#When the parameter here is decimal, it is the percentage of information retained.</span>
<span class="c1"># pca = PCA(n_component_ratio=10) #When the parameter is an integer, n principal components are reserved.</span>
<span class="n">X_train_qrpca</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">X_test_qrpca</span><span class="o">=</span><span class="n">pca</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">pca_n</span><span class="o">=</span><span class="n">X_train_qrpca</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;torch_QR&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;keep </span><span class="si">{}</span><span class="s2"> features after pca </span><span class="se">\n</span><span class="s2">the shape of X_train after PCA: </span><span class="si">{}</span><span class="s2"> </span><span class="se">\n</span><span class="s2">the shape of X_test after PCA: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pca_n</span><span class="p">,</span><span class="n">X_train_qrpca</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span><span class="n">X_test_qrpca</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X_train_qrpca</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--- </span><span class="si">%s</span><span class="s2"> seconds ---&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">))</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">pca</span> <span class="o">=</span> <span class="n">QRPCA</span><span class="p">(</span><span class="n">n_component_ratio</span><span class="o">=</span><span class="n">n_com</span><span class="p">,</span><span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>
<span class="n">X_train_qrpca</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">X_test_qrpca</span><span class="o">=</span><span class="n">pca</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">pca_n</span><span class="o">=</span><span class="n">X_train_qrpca</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;torch_QR&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;keep </span><span class="si">{}</span><span class="s2"> features after pca </span><span class="se">\n</span><span class="s2">the shape of X_train after PCA: </span><span class="si">{}</span><span class="s2"> </span><span class="se">\n</span><span class="s2">the shape of X_test after PCA: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pca_n</span><span class="p">,</span><span class="n">X_train_qrpca</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span><span class="n">X_test_qrpca</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X_train_qrpca</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--- </span><span class="si">%s</span><span class="s2"> seconds ---&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">))</span>

<span class="n">device</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">device</span><span class="p">(</span><span class="s2">&quot;cpu&quot;</span><span class="p">)</span>
<span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">pca</span> <span class="o">=</span> <span class="n">SVDPCA</span><span class="p">(</span><span class="n">n_component_ratio</span><span class="o">=</span><span class="n">n_com</span><span class="p">,</span><span class="n">device</span><span class="o">=</span><span class="n">device</span><span class="p">)</span>
<span class="c1"># pca = PCA(n_component_ratio=10) #When the parameter is an integer, n principal components are reserved.</span>
<span class="n">X_train_qrpca</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">X_test_qrpca</span><span class="o">=</span><span class="n">pca</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">pca_n</span><span class="o">=</span><span class="n">X_train_qrpca</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;torch_SVD&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;keep </span><span class="si">{}</span><span class="s2"> features after pca </span><span class="se">\n</span><span class="s2">the shape of X_train after PCA: </span><span class="si">{}</span><span class="s2"> </span><span class="se">\n</span><span class="s2">the shape of X_test after PCA: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pca_n</span><span class="p">,</span><span class="n">X_train_qrpca</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span><span class="n">X_test_qrpca</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">X_train_qrpca</span><span class="o">.</span><span class="n">device</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--- </span><span class="si">%s</span><span class="s2"> seconds ---&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">))</span>

<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>

<span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>
<span class="n">pca2</span> <span class="o">=</span> <span class="n">PCA</span><span class="p">(</span><span class="n">n_components</span><span class="o">=</span><span class="n">n_com</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">whiten</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">X_train_pca2</span> <span class="o">=</span> <span class="n">pca2</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X_train</span><span class="p">)</span>
<span class="n">X_test_pca2</span> <span class="o">=</span> <span class="n">pca2</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
<span class="n">pca_n2</span> <span class="o">=</span> <span class="n">X_train_pca2</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">10</span><span class="p">,</span><span class="s1">&#39;sklearn&#39;</span><span class="p">,</span><span class="s1">&#39;=&#39;</span><span class="o">*</span><span class="mi">10</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;keep </span><span class="si">{}</span><span class="s2"> features after pca </span><span class="se">\n</span><span class="s2">the shape of X_train after PCA: </span><span class="si">{}</span><span class="s2"> </span><span class="se">\n</span><span class="s2">the shape of X_test after PCA: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pca_n</span><span class="p">,</span><span class="n">X_train_qrpca</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span><span class="n">X_test_qrpca</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;--- </span><span class="si">%s</span><span class="s2"> seconds ---&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span><span class="p">))</span>
</pre></div>
</div>
<p>Then the result is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">==========</span> <span class="n">torch_QR</span> <span class="o">==========</span>
<span class="n">keep</span> <span class="mi">1860</span> <span class="n">features</span> <span class="n">after</span> <span class="n">pca</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_train</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">60000</span><span class="p">,</span> <span class="mi">1860</span><span class="p">])</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_test</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">1860</span><span class="p">])</span>
<span class="n">cuda</span><span class="p">:</span><span class="mi">0</span>
<span class="o">---</span> <span class="mf">3.66221284866333</span> <span class="n">seconds</span> <span class="o">---</span>
<span class="o">==========</span> <span class="n">torch_QR</span> <span class="o">==========</span>
<span class="n">keep</span> <span class="mi">1860</span> <span class="n">features</span> <span class="n">after</span> <span class="n">pca</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_train</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">60000</span><span class="p">,</span> <span class="mi">1860</span><span class="p">])</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_test</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">1860</span><span class="p">])</span>
<span class="n">cpu</span>
<span class="o">---</span> <span class="mf">8.777541637420654</span> <span class="n">seconds</span> <span class="o">---</span>
<span class="o">==========</span> <span class="n">torch_SVD</span> <span class="o">==========</span>
<span class="n">keep</span> <span class="mi">1860</span> <span class="n">features</span> <span class="n">after</span> <span class="n">pca</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_train</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">60000</span><span class="p">,</span> <span class="mi">1860</span><span class="p">])</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_test</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">1860</span><span class="p">])</span>
<span class="n">cpu</span>
<span class="o">---</span> <span class="mf">9.32607626914978</span> <span class="n">seconds</span> <span class="o">---</span>
<span class="o">==========</span> <span class="n">sklearn</span> <span class="o">==========</span>
<span class="n">keep</span> <span class="mi">1860</span> <span class="n">features</span> <span class="n">after</span> <span class="n">pca</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_train</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="p">(</span><span class="mi">60000</span><span class="p">,</span> <span class="mi">1860</span><span class="p">)</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_test</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="p">(</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">1860</span><span class="p">)</span>
<span class="o">---</span> <span class="mf">27.23160696029663</span> <span class="n">seconds</span> <span class="o">---</span>
</pre></div>
</div>
<p>The following is the result of retaining principal components containing an integer number of information items by principal component analysis.
Set the parameter n_components to an integer.</p>
<p>Edit the parameters of the above code as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">n_com</span> <span class="o">=</span> <span class="mi">500</span>
</pre></div>
</div>
<p>Then the result is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">==========</span> <span class="n">torch_QR</span> <span class="o">==========</span>
<span class="n">keep</span> <span class="mi">500</span> <span class="n">features</span> <span class="n">after</span> <span class="n">pca</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_train</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">60000</span><span class="p">,</span> <span class="mi">500</span><span class="p">])</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_test</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">500</span><span class="p">])</span>
<span class="n">cuda</span><span class="p">:</span><span class="mi">0</span>
<span class="o">---</span> <span class="mf">3.5724520683288574</span> <span class="n">seconds</span> <span class="o">---</span>
<span class="o">==========</span> <span class="n">torch_QR</span> <span class="o">==========</span>
<span class="n">keep</span> <span class="mi">500</span> <span class="n">features</span> <span class="n">after</span> <span class="n">pca</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_train</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">60000</span><span class="p">,</span> <span class="mi">500</span><span class="p">])</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_test</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">500</span><span class="p">])</span>
<span class="n">cpu</span>
<span class="o">---</span> <span class="mf">7.9796741008758545</span> <span class="n">seconds</span> <span class="o">---</span>
<span class="o">==========</span> <span class="n">torch_SVD</span> <span class="o">==========</span>
<span class="n">keep</span> <span class="mi">500</span> <span class="n">features</span> <span class="n">after</span> <span class="n">pca</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_train</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">60000</span><span class="p">,</span> <span class="mi">500</span><span class="p">])</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_test</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">500</span><span class="p">])</span>
<span class="n">cpu</span>
<span class="o">---</span> <span class="mf">8.098357200622559</span> <span class="n">seconds</span> <span class="o">---</span>
<span class="o">==========</span> <span class="n">sklearn</span> <span class="o">==========</span>
<span class="n">keep</span> <span class="mi">500</span> <span class="n">features</span> <span class="n">after</span> <span class="n">pca</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_train</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">60000</span><span class="p">,</span> <span class="mi">500</span><span class="p">])</span>
<span class="n">the</span> <span class="n">shape</span> <span class="n">of</span> <span class="n">X_test</span> <span class="n">after</span> <span class="n">PCA</span><span class="p">:</span> <span class="n">torch</span><span class="o">.</span><span class="n">Size</span><span class="p">([</span><span class="mi">10000</span><span class="p">,</span> <span class="mi">500</span><span class="p">])</span>
<span class="o">---</span> <span class="mf">15.316067457199097</span> <span class="n">seconds</span> <span class="o">---</span>
</pre></div>
</div>
<p>Comparison of PCA degradation time with different number of rows and different methods for the case of 1000 columns.</p>
<img alt="_images/result_1000.png" src="_images/result_1000.png" />
<p>Comparison of PCA reduction time with different number of columns and different methods for the case of 30000 rows.</p>
<img alt="_images/3w_18_result.png" src="_images/3w_18_result.png" />
</section>
<section id="requirements">
<h1>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>numpy&gt;=1.21.1</p></li>
<li><p>pandas&gt;=1.3.5</p></li>
<li><p>torch&gt;=1.8.1</p></li>
<li><p>torchvision&gt;=0.8.0</p></li>
<li><p>cudatoolkit&gt;=0.7.1</p></li>
<li><p>scikit-learn&gt;=1.0.2</p></li>
</ul>
<p>Use the dependent environment as above, <code class="docutils literal notranslate"><span class="pre">scikit-python</span></code> is the dependent package required to load test data.</p>
</section>
<section id="copyright-license">
<h1>Copyright &amp; License<a class="headerlink" href="#copyright-license" title="Permalink to this headline">¶</a></h1>
<p>2022 Xu Quanfeng (<a class="reference external" href="mailto:xuquanfeng&#37;&#52;&#48;shao&#46;ac&#46;cn">xuquanfeng<span>&#64;</span>shao<span>&#46;</span>ac<span>&#46;</span>cn</a>) &amp; Rafael S. de Souza (<a class="reference external" href="mailto:drsouza&#37;&#52;&#48;shao&#46;ac&#46;cn">drsouza<span>&#64;</span>shao<span>&#46;</span>ac<span>&#46;</span>cn</a>) &amp; Shen Shiyin (<a class="reference external" href="mailto:ssy&#37;&#52;&#48;shao&#46;ac&#46;cn">ssy<span>&#64;</span>shao<span>&#46;</span>ac<span>&#46;</span>cn</a>) &amp; Peng Chen (<a class="reference external" href="mailto:pengchzn&#37;&#52;&#48;gmail&#46;com">pengchzn<span>&#64;</span>gmail<span>&#46;</span>com</a>)</p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.</p>
</section>
<section id="references">
<h1>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p>Sharma A, Paliwal K K, Imoto S, et al. Principal component analysis using QR decomposition[J]. International Journal of Machine Learning and Cybernetics, 2013, 4(6): 679-683.</p></li>
</ul>
</section>
<section id="citing-qrpca">
<h1>Citing <code class="docutils literal notranslate"><span class="pre">qrpca</span></code><a class="headerlink" href="#citing-qrpca" title="Permalink to this headline">¶</a></h1>
<p>If you want to cite <code class="docutils literal notranslate"><span class="pre">qrpca</span></code>, please use the following citations.</p>
<p>Software Citation: Xu Quanfeng, &amp; Rafael S. de Souza. (2022). PCA algorithm of QR accelerated SVD decomposition (1.4). Zenodo. <a class="reference external" href="https://doi.org/10.5281/zenodo.6417821">https://doi.org/10.5281/zenodo.6417821</a></p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">qrpca</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">QRPCA</a></li>
<li class="toctree-l1"><a class="reference internal" href="#how-to-install-qrpca">How to install <code class="docutils literal notranslate"><span class="pre">qrpca</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#how-to-use-qrpca">How to use <code class="docutils literal notranslate"><span class="pre">qrpca</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="#copyright-license">Copyright &amp; License</a></li>
<li class="toctree-l1"><a class="reference internal" href="#references">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="#citing-qrpca">Citing <code class="docutils literal notranslate"><span class="pre">qrpca</span></code></a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter"><cite>QRPCA</cite></a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Xu Quanfeng & Rafael S. de Souza & Shen Shiyin & Peng Chen.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/README.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>